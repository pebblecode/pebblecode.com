define(["jquery","backbone"],function(e,t){var n=function(r){var i=r.routes,s=r.clickElem,o=r.postClick,u=t.Router.extend({initialize:function(){return this.bind("route",this._trackPageview)},routes:i,_trackPageview:function(){var e;return e=t.history.getFragment(),_gaq.push(["_trackPageview","/"+e])}}),a=new u,f=!0,l=!!(f&&window.history&&window.history.pushState);l&&e(document).on("click",s,function(t){if(!t.altKey&&!t.ctrlKey&&!t.metaKey&&!t.shiftKey){t.preventDefault();var n=e(t.currentTarget).attr("href").replace(/^\//,"");a.navigate(n,{trigger:!0}),o&&o(t.target)}}),t.history.start({pushState:l,hashChange:l})};return{init:n}});