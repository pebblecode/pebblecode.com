define(["jquery","jquery.scrollTo","backbone","underscore.string"],function(e,t,n,r){function i(){var e,t,n=window.location;"pushState"in history?history.pushState("",document.title,n.pathname+n.search):(e=document.body.scrollTop,t=document.body.scrollLeft,n.hash="",document.body.scrollTop=e,document.body.scrollLeft=t)}function s(t){return e("#"+t).length>0}function o(t){e("#spotlight .person-row").removeClass("active"),e("#"+t).addClass("active")}function u(){e.scrollTo(e("#spotlight-scroll"),600)}var a=n.Router.extend({initialize:function(){return this.bind("route",this._trackPageview)},routes:{"people/:person":"getPerson"},_trackPageview:function(){var e;return e=n.history.getFragment(),_gaq.push(["_trackPageview","/"+e])},getPerson:function(e){var t=r.slugify(e);s(t)?o(t):i()}}),f=new a,l=!0,c=!!(l&&window.history&&window.history.pushState);c&&e(document).on("click",".person",function(t){if(!t.altKey&&!t.ctrlKey&&!t.metaKey&&!t.shiftKey){t.preventDefault();var n=e(t.currentTarget).attr("href").replace(/^\//,"");f.navigate(n,{trigger:!0}),u()}}),n.history.start({pushState:c,hashChange:c})});